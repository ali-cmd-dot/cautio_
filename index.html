<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="style.css">
    <title>Cautio</title>
    <link rel="icon" href="favicon.ico">
    
    <!-- Supabase -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
</head>
<body class="__variable_3c557b dark font-sans dark:bg-dark-fill-base-400 locale-en" style="--primary-font:'__Inter_e8ce0c', '__Inter_Fallback_e8ce0c'">
    
    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="fixed inset-0 bg-black bg-opacity-75 hidden z-50 flex items-center justify-center">
        <div class="flex flex-col items-center">
            <div id="nprogress">
                <div class="bar">
                    <div class="peg"></div>
                </div>
                <div class="spinner">
                    <div class="spinner-icon"></div>
                </div>
            </div>
            <div class="mt-8 text-center">
                <div class="text-heading-6 dark:text-dark-base-600 mb-2">Processing...</div>
                <div class="text-body-l-regular dark:text-dark-base-500">Please wait</div>
            </div>
        </div>
    </div>

    <!-- Login Page -->
    <div id="loginPage" class="ml-5 min-h-screen flex-1 pr-6" style="padding-left:4.68rem;padding-top:0">
        <style>
            #nprogress {
                pointer-events: none;
            }

            #nprogress .bar {
                background: #0045ff;
                position: fixed;
                z-index: 99999;
                top: 0;
                left: 0;
                width: 100%;
                height: 5px;
            }

            #nprogress .peg {
                display: block;
                position: absolute;
                right: 0px;
                width: 100px;
                height: 100%;
                box-shadow: 0 0 10px #0045ff, 0 0 5px #0045ff;
                opacity: 1.0;
                -webkit-transform: rotate(3deg) translate(0px, -4px);
                -ms-transform: rotate(3deg) translate(0px, -4px);
                transform: rotate(3deg) translate(0px, -4px);
            }

            #nprogress .spinner {
                display: block;
                position: fixed;
                z-index: 1031;
                top: 15px;
                right: 15px;
            }

            #nprogress .spinner-icon {
                width: 18px;
                height: 18px;
                box-sizing: border-box;
                border: solid 2px transparent;
                border-top-color: #0045ff;
                border-left-color: #0045ff;
                border-radius: 50%;
                -webkit-animation: nprogress-spinner 400ms linear infinite;
                animation: nprogress-spinner 400ms linear infinite;
            }

            .nprogress-custom-parent {
                overflow: hidden;
                position: relative;
            }

            .nprogress-custom-parent #nprogress .spinner,
            .nprogress-custom-parent #nprogress .bar {
                position: absolute;
            }

            @-webkit-keyframes nprogress-spinner {
                0%   { -webkit-transform: rotate(0deg); }
                100% { -webkit-transform: rotate(360deg); }
            }
            @keyframes nprogress-spinner {
                0%   { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
        </style>

        <div class="mx-auto max-w-md pt-24">
            <div class="text-center mb-8">
                <h1 class="text-heading-3 dark:text-dark-base-600 mb-4">Cautio Dashboard</h1>
                <p class="text-body-l-regular dark:text-dark-base-500">Please sign in to continue</p>
            </div>

            <form id="loginForm" class="space-y-6 bg-white/5 backdrop-blur-sm border border-white/10 rounded-lg p-6">
                <div>
                    <label for="username" class="block text-body-m-semibold dark:text-dark-base-600 mb-2">Username</label>
                    <input type="text" id="username" name="username" required 
                           class="w-full px-4 py-3 rounded-lg dark:bg-dark-stroke-base-400 dark:border dark:border-dark-stroke-contrast-400 dark:text-dark-base-600 focus:outline-none focus:border-brand-blue-600">
                </div>

                <div>
                    <label for="password" class="block text-body-m-semibold dark:text-dark-base-600 mb-2">Password</label>
                    <input type="password" id="password" name="password" required 
                           class="w-full px-4 py-3 rounded-lg dark:bg-dark-stroke-base-400 dark:border dark:border-dark-stroke-contrast-400 dark:text-dark-base-600 focus:outline-none focus:border-brand-blue-600">
                </div>

                <button type="submit" class="w-full py-3 px-6 rounded-lg dark:bg-brand-blue-600 dark:text-utility-white hover:dark:bg-brand-blue-500 text-body-m-semibold">
                    Sign In
                </button>
            </form>
        </div>
    </div>

    <!-- Main Dashboard -->
    <div id="dashboardPage" class="min-h-screen hidden">
        <!-- Sidebar -->
        <div id="sidebar" class="sidebar collapsed fixed left-0 top-0 h-full dark:bg-dark-fill-base-300 dark:border-r dark:border-dark-stroke-contrast-400 z-40">
            <!-- Sidebar Header -->
            <div class="sidebar-header p-4">
                <div class="flex items-center justify-between">
                    <div class="flex items-center gap-3">
                        <div class="w-8 h-8 rounded-lg dark:bg-brand-blue-600 flex items-center justify-center">
                            <span class="text-utility-white text-body-s-semibold">C</span>
                        </div>
                        <span class="menu-text text-heading-6 dark:text-dark-base-600">Cautio</span>
                    </div>
                    
                    <!-- Hamburger Button -->
                    <button onclick="toggleSidebar()" class="hamburger-button dark:hover:bg-dark-fill-base-600">
                        <div class="hamburger-menu-icon">
                            <span class="hamburger-line"></span>
                            <span class="hamburger-line"></span>
                            <span class="hamburger-line"></span>
                        </div>
                    </button>
                </div>
            </div>
            
            <!-- Sidebar Navigation -->
            <div class="sidebar-nav px-4 pb-4">
                <nav class="space-y-2">
                    <div onclick="showCustomersOverview()" class="menu-item flex items-center gap-3 p-3 rounded-lg cursor-pointer hover:dark:bg-dark-fill-base-600 dark:text-dark-base-600">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                            <circle cx="9" cy="7" r="4"/>
                            <path d="m22 21-3-3m0 0a2 2 0 0 0 0-4 2 2 0 0 0 0 4"/>
                        </svg>
                        <span class="menu-text text-body-m-semibold">Customers Overview</span>
                    </div>
                    
                    <div onclick="showFinance()" class="menu-item flex items-center gap-3 p-3 rounded-lg cursor-pointer hover:dark:bg-dark-fill-base-600 dark:text-dark-base-600">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M12 2v20m8-9a8 8 0 1 1-16 0 8 8 0 0 1 16 0Z"/>
                        </svg>
                        <span class="menu-text text-body-m-semibold">Finance</span>
                    </div>
                    
                    <div onclick="showStock()" class="menu-item flex items-center gap-3 p-3 rounded-lg cursor-pointer hover:dark:bg-dark-fill-base-600 dark:text-dark-base-600">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M2 3h6l2 13h7l4-8H9"/>
                        </svg>
                        <span class="menu-text text-body-m-semibold">Stock</span>
                    </div>
                    
                    <div onclick="showInventoryManagement()" class="menu-item flex items-center gap-3 p-3 rounded-lg cursor-pointer hover:dark:bg-dark-fill-base-600 dark:text-dark-base-600">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M3 7v10a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2H5a2 2 0 0 0-2-2z"/>
                            <path d="M8 5v4"/>
                            <path d="M16 5v4"/>
                        </svg>
                        <span class="menu-text text-body-m-semibold">Inventory Management</span>
                    </div>
                    
                    <div onclick="showGroundOperations()" class="menu-item flex items-center gap-3 p-3 rounded-lg cursor-pointer hover:dark:bg-dark-fill-base-600 dark:text-dark-base-600">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M12 2v20"/>
                            <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                        </svg>
                        <span class="menu-text text-body-m-semibold">Ground Operations</span>
                    </div>
                    
                    <div onclick="showAddCredentials()" class="menu-item flex items-center gap-3 p-3 rounded-lg cursor-pointer hover:dark:bg-dark-fill-base-600 dark:text-dark-base-600">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M9 12l2 2 4-4"/>
                            <path d="M21 12c0 1.3-.6 2.5-1.5 3.3a5.07 5.07 0 0 1-3.5 1.4c-1.3 0-2.5-.6-3.3-1.5a5.07 5.07 0 0 1-1.4-3.5c0-1.3.6-2.5 1.5-3.3a5.07 5.07 0 0 1 3.5-1.4c1.3 0 2.5.6 3.3 1.5a5.07 5.07 0 0 1 1.4 3.5"/>
                            <path d="M11.5 7.5a2.5 2.5 0 0 0 0 5"/>
                        </svg>
                        <span class="menu-text text-body-m-semibold">Add Credentials</span>
                    </div>
                </nav>
                
                <!-- Logout button at bottom -->
                <div class="mt-auto pt-4">
                    <button onclick="logout()" class="w-full flex items-center gap-3 p-3 rounded-lg cursor-pointer hover:dark:bg-red-600/20 dark:text-red-400 text-body-m-semibold">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                            <polyline points="16,17 21,12 16,7"/>
                            <line x1="21" y1="12" x2="9" y2="12"/>
                        </svg>
                        <span class="menu-text">Logout</span>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Main Content -->
        <div id="mainContent" class="main-content sidebar-collapsed">
            <!-- Header -->
            <div class="dark:bg-dark-fill-base-300 dark:border-b dark:border-dark-stroke-contrast-400 p-4">
                <div class="flex items-center justify-between">
                    <div>
                        <h1 class="text-heading-5 dark:text-dark-base-600">Dashboard</h1>
                        <p class="text-body-m-regular dark:text-dark-base-500">Welcome to Cautio Management System</p>
                    </div>
                    
                    <!-- User Info -->
                    <div class="flex items-center gap-4">
                        <div class="flex items-center gap-4">
                            <!-- Customer Names Dropdown -->
                            <div class="relative">
                                <button onclick="toggleCustomerDropdown()" class="flex items-center gap-2 px-4 py-2 rounded-lg dark:bg-dark-stroke-base-400 dark:text-dark-base-600 hover:dark:bg-dark-stroke-base-600 transition-colors">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                                        <circle cx="9" cy="7" r="4"/>
                                        <path d="m22 21-3-3m0 0a2 2 0 0 0 0-4 2 2 0 0 0 0 4"/>
                                    </svg>
                                    <span>All Customer Names</span>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="m6 9 6 6 6-6"/>
                                    </svg>
                                </button>
                                
                                <!-- Dropdown Menu -->
                                <div id="customerDropdown" class="hidden absolute top-full left-0 mt-2 w-64 max-h-60 overflow-y-auto dark:bg-dark-fill-base-300 dark:border dark:border-dark-stroke-contrast-400 rounded-lg shadow-lg z-50">
                                    <div class="p-2">
                                        <div class="text-body-s-semibold dark:text-dark-base-600 p-2 border-b dark:border-dark-stroke-contrast-400">Approved Customers</div>
                                        <div id="customerDropdownList" class="py-2">
                                            <!-- Customer names will be populated here -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <span onclick="showAllCustomers()" class="text-body-l-regular dark:text-dark-base-600 cursor-pointer hover:dark:text-brand-blue-600 transition-colors">Total Approved Customers: <span id="totalCustomersHeaderCount" class="text-brand-blue-600 font-semibold">0</span></span>
                        <div class="text-right">
                            <div class="text-body-m-semibold dark:text-dark-base-600" id="userDisplayName">User</div>
                            <div class="text-body-s-regular dark:text-dark-base-500" id="userRole">Role</div>
                        </div>
                        <div class="w-10 h-10 rounded-full dark:bg-brand-blue-600 flex items-center justify-center">
                            <span class="text-utility-white text-body-s-semibold" id="userAvatar">U</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Content Area -->
            <div id="contentArea" class="p-6">
                <!-- Customers Overview Content -->
                <div id="customersOverviewContent">
                    <!-- Total Customers Count -->
                    <div class="text-center mb-8">
                        <div onclick="showAllCustomers()" class="inline-block px-8 py-4 rounded-lg dark:bg-dark-fill-base-300 dark:border dark:border-dark-stroke-contrast-400 cursor-pointer hover:dark:bg-dark-fill-base-600 transition-colors">
                            <h2 class="text-heading-5 dark:text-dark-base-600 mb-2">Total Approved Customers</h2>
                            <p id="totalCustomersDisplay" class="text-display-3 dark:text-brand-blue-600">0</p>
                            <p class="text-body-s-regular dark:text-dark-base-500 mt-2">Click to view all approved customers</p>
                        </div>
                    </div>

                    <!-- Search Bar -->
                    <div class="flex items-center justify-end mb-6">
                        <div class="relative">
                            <input type="text" id="searchInput" placeholder="Search customers and leads..." 
                                   onkeyup="handleSearch(event)" 
                                   class="pl-10 pr-4 py-2 w-80 rounded-lg dark:bg-dark-stroke-base-400 dark:border dark:border-dark-stroke-contrast-400 dark:text-dark-base-600 focus:outline-none focus:border-brand-blue-600">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="absolute left-3 top-1/2 transform -translate-y-1/2 dark:text-dark-base-500">
                                <circle cx="11" cy="11" r="8"/>
                                <path d="m21 21-4.35-4.35"/>
                            </svg>
                            <button onclick="clearSearch()" class="absolute right-3 top-1/2 transform -translate-y-1/2 dark:text-dark-base-500 hover:dark:text-dark-base-600">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="m18 6-12 12"/>
                                    <path d="m6 6 12 12"/>
                                </svg>
                            </button>
                        </div>
                    </div>

                    <!-- Dashboard Tabs -->
                    <div class="mb-6">
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex space-x-1">
                                <button onclick="showAllTab()" class="tab-button active" id="allTab">
                                    <span class="tab-label">All</span>
                                    <span class="tab-count" id="allCount">0</span>
                                </button>
                                <button onclick="showPOCTab()" class="tab-button" id="pocTab">
                                    <span class="tab-label">POC</span>
                                    <span class="tab-count" id="pocCount">0</span>
                                </button>
                                <button onclick="showOnboardedTab()" class="tab-button" id="onboardedTab">
                                    <span class="tab-label">Onboarded</span>
                                    <span class="tab-count" id="onboardedCount">0</span>
                                </button>
                                <button onclick="showClosedLeadsTab()" class="tab-button" id="closedLeadsTab">
                                    <span class="tab-label">Closed</span>
                                    <span class="tab-count" id="closedCount">0</span>
                                </button>
                                <button onclick="showOngoingLeadsTab()" class="tab-button" id="ongoingLeadsTab">
                                    <span class="tab-label">Ongoing Leads</span>
                                    <span class="tab-count" id="ongoingLeadsCount">0</span>
                                </button>
                            </div>
                            
                            <div class="text-body-s-regular dark:text-dark-base-500" id="searchResults"></div>
                        </div>

                        <!-- Tab Content -->
                        <div id="tabContent">
                            <!-- All Tab Content -->
                            <div id="allTabContent" class="tab-content">
                                <div class="mb-4">
                                    <h3 class="text-heading-6 dark:text-dark-base-600 mb-2">All Customers & Leads</h3>
                                    <p class="text-body-m-regular dark:text-dark-base-500">Overview of all customers and leads in the system</p>
                                </div>
                                <div id="allCustomersList" class="space-y-4">
                                    <!-- All content will be loaded here -->
                                </div>
                                <div id="allEmptyState" class="text-center py-12" style="display: none;">
                                    <h3 class="text-heading-6 dark:text-dark-base-600 mb-4">No Data Found</h3>
                                    <p class="text-body-l-regular dark:text-dark-base-500">No customers or leads found matching your criteria</p>
                                </div>
                            </div>

                            <!-- POC Tab Content -->
                            <div id="pocTabContent" class="tab-content hidden">
                                <div class="mb-4">
                                    <h3 class="text-heading-6 dark:text-dark-base-600 mb-2">POC Customers</h3>
                                    <p class="text-body-m-regular dark:text-dark-base-500">Customers currently in Proof of Concept phase</p>
                                </div>
                                <div id="pocCustomersList" class="space-y-4">
                                    <!-- POC customers will be loaded here -->
                                </div>
                                <div id="pocEmptyState" class="text-center py-12" style="display: none;">
                                    <h3 class="text-heading-6 dark:text-dark-base-600 mb-4">No POC Customers</h3>
                                    <p class="text-body-l-regular dark:text-dark-base-500">All POC customers are currently waiting for finance approval</p>
                                </div>
                            </div>

                            <!-- Onboarded Tab Content -->
                            <div id="onboardedTabContent" class="tab-content hidden">
                                <div class="mb-4">
                                    <h3 class="text-heading-6 dark:text-dark-base-600 mb-2">Onboarded Customers</h3>
                                    <p class="text-body-m-regular dark:text-dark-base-500">Successfully onboarded customers</p>
                                </div>
                                <div id="onboardedCustomersList" class="space-y-4">
                                    <!-- Onboarded customers will be loaded here -->
                                </div>
                                <div id="onboardedEmptyState" class="text-center py-12" style="display: none;">
                                    <h3 class="text-heading-6 dark:text-dark-base-600 mb-4">No Onboarded Customers</h3>
                                    <p class="text-body-l-regular dark:text-dark-base-500">No customers have been onboarded yet</p>
                                </div>
                            </div>

                            <!-- Closed Leads Tab Content -->
                            <div id="closedLeadsTabContent" class="tab-content hidden">
                                <div class="mb-4">
                                    <h3 class="text-heading-6 dark:text-dark-base-600 mb-2">Closed</h3>
                                    <p class="text-body-m-regular dark:text-dark-base-500">Closed customers and leads</p>
                                </div>
                                <div id="closedLeadsList" class="space-y-4">
                                    <!-- Closed leads and customers will be loaded here -->
                                </div>
                                <div id="closedLeadsEmptyState" class="text-center py-12" style="display: none;">
                                    <h3 class="text-heading-6 dark:text-dark-base-600 mb-4">No Closed Items</h3>
                                    <p class="text-body-l-regular dark:text-dark-base-500">No closed customers or leads found</p>
                                </div>
                            </div>

                            <!-- Ongoing Leads Tab Content -->
                            <div id="ongoingLeadsTabContent" class="tab-content hidden">
                                <div class="mb-4">
                                    <h3 class="text-heading-6 dark:text-dark-base-600 mb-2">Ongoing Leads</h3>
                                    <p class="text-body-m-regular dark:text-dark-base-500">Active leads in progress</p>
                                </div>
                                <div id="ongoingLeadsList" class="space-y-4">
                                    <!-- Ongoing leads will be loaded here -->
                                </div>
                                <div id="ongoingLeadsEmptyState" class="text-center py-12" style="display: none;">
                                    <h3 class="text-heading-6 dark:text-dark-base-600 mb-4">No Ongoing Leads</h3>
                                    <p class="text-body-l-regular dark:text-dark-base-500">No active leads found</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Finance Content -->
                <div id="financeContent" class="hidden">
                    <div class="mb-6">
                        <h2 class="text-heading-5 dark:text-dark-base-600 mb-2">Finance Approval</h2>
                        <p class="text-body-l-regular dark:text-dark-base-500">Review and approve customer applications</p>
                    </div>

                    <!-- Finance Status Tabs -->
                    <div class="mb-6">
                        <div class="flex space-x-1">
                            <button onclick="showPendingApprovals()" class="tab-button active" id="pendingTab">
                                <span class="tab-label">Pending Approval</span>
                                <span class="tab-count" id="pendingApprovalCount">0</span>
                            </button>
                            <button onclick="showApprovedCustomers()" class="tab-button" id="approvedTab">
                                <span class="tab-label">Approved</span>
                                <span class="tab-count" id="approvedCustomerCount">0</span>
                            </button>
                            <button onclick="showRejectedCustomers()" class="tab-button" id="rejectedTab">
                                <span class="tab-label">Rejected</span>
                                <span class="tab-count" id="rejectedCustomerCount">0</span>
                            </button>
                        </div>
                    </div>

                    <!-- Finance Tab Content -->
                    <div id="financeTabContent">
                        <!-- Pending Approvals -->
                        <div id="pendingApprovalsContent">
                            <div id="pendingApprovalsList" class="space-y-4">
                                <!-- Pending approvals will be loaded here -->
                            </div>
                            <div id="pendingApprovalsEmpty" class="text-center py-12" style="display: none;">
                                <h3 class="text-heading-6 dark:text-dark-base-600 mb-4">No Pending Approvals</h3>
                                <p class="text-body-l-regular dark:text-dark-base-500">All customer applications have been reviewed</p>
                            </div>
                        </div>

                        <!-- Approved Customers -->
                        <div id="approvedCustomersContent" class="hidden">
                            <div id="approvedCustomersList" class="space-y-4">
                                <!-- Approved customers will be loaded here -->
                            </div>
                            <div id="approvedCustomersEmpty" class="text-center py-12" style="display: none;">
                                <h3 class="text-heading-6 dark:text-dark-base-600 mb-4">No Approved Customers</h3>
                                <p class="text-body-l-regular dark:text-dark-base-500">No customers have been approved yet</p>
                            </div>
                        </div>

                        <!-- Rejected Customers -->
                        <div id="rejectedCustomersContent" class="hidden">
                            <div id="rejectedCustomersList" class="space-y-4">
                                <!-- Rejected customers will be loaded here -->
                            </div>
                            <div id="rejectedCustomersEmpty" class="text-center py-12" style="display: none;">
                                <h3 class="text-heading-6 dark:text-dark-base-600 mb-4">No Rejected Customers</h3>
                                <p class="text-body-l-regular dark:text-dark-base-500">No customers have been rejected</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Ground Operations Content -->
                <div id="groundOperationsContent" class="hidden">
                    <div class="text-center py-12">
                        <h3 class="text-heading-5 dark:text-dark-base-600 mb-4">Ground Operations</h3>
                        <p class="text-body-l-regular dark:text-dark-base-500">Device rectification and ground team operations</p>
                        <div class="mt-8">
                            <div class="max-w-2xl mx-auto p-6 dark:bg-dark-fill-base-300 dark:border dark:border-dark-stroke-contrast-400 rounded-lg">
                                <h4 class="text-heading-6 dark:text-dark-base-600 mb-4">Available Operations</h4>
                                <div class="space-y-3">
                                    <div class="p-4 dark:bg-dark-stroke-base-400 rounded-lg">
                                        <h5 class="text-body-l-semibold dark:text-dark-base-600">Device Rectification</h5>
                                        <p class="text-body-m-regular dark:text-dark-base-500">Repair and maintenance of tracking devices</p>
                                    </div>
                                    <div class="p-4 dark:bg-dark-stroke-base-400 rounded-lg">
                                        <h5 class="text-body-l-semibold dark:text-dark-base-600">Field Operations</h5>
                                        <p class="text-body-m-regular dark:text-dark-base-500">On-site installation and support</p>
                                    </div>
                                    <div class="p-4 dark:bg-dark-stroke-base-400 rounded-lg">
                                        <h5 class="text-body-l-semibold dark:text-dark-base-600">Quality Assurance</h5>
                                        <p class="text-body-m-regular dark:text-dark-base-500">Testing and validation of devices</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Add Credentials Content -->
                <div id="addCredentialsContent" class="hidden">
                    <div class="mb-8">
                        <h2 class="text-heading-5 dark:text-dark-base-600 mb-2">User Credentials Management</h2>
                        <p class="text-body-l-regular dark:text-dark-base-500">Add and manage user credentials for dashboard access</p>
                    </div>

                    <!-- Add New Credential Form -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <div class="p-6 rounded-lg dark:bg-dark-fill-base-300 dark:border dark:border-dark-stroke-contrast-400">
                            <h3 class="text-heading-6 dark:text-dark-base-600 mb-4">Add New User</h3>
                            <form id="addCredentialForm" class="space-y-4">
                                <div>
                                    <label class="block text-body-l-semibold dark:text-dark-base-600 mb-2">Full Name</label>
                                    <input type="text" name="fullName" class="w-full rounded-lg border p-3 outline-none dark:border-dark-stroke-contrast-400 dark:bg-dark-fill-base-400 dark:text-dark-base-600 dark:focus:border-brand-blue-600" placeholder="Enter full name" required>
                                </div>
                                
                                <div>
                                    <label class="block text-body-l-semibold dark:text-dark-base-600 mb-2">Email Address</label>
                                    <input type="email" name="email" class="w-full rounded-lg border p-3 outline-none dark:border-dark-stroke-contrast-400 dark:bg-dark-fill-base-400 dark:text-dark-base-600 dark:focus:border-brand-blue-600" placeholder="Enter email address" required>
                                </div>
                                
                                <div>
                                    <label class="block text-body-l-semibold dark:text-dark-base-600 mb-2">Password</label>
                                    <div class="relative">
                                        <input type="password" name="password" id="newUserPassword" class="w-full rounded-lg border p-3 pr-10 outline-none dark:border-dark-stroke-contrast-400 dark:bg-dark-fill-base-400 dark:text-dark-base-600 dark:focus:border-brand-blue-600" placeholder="Enter password" required>
                                        <button type="button" onclick="toggleNewPasswordVisibility()" class="absolute inset-y-0 right-0 flex items-center pr-3">
                                            <svg id="newPasswordToggleIcon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="dark:text-dark-base-500">
                                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                                                <circle cx="12" cy="12" r="3"/>
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                                
                                <div>
                                    <label class="block text-body-l-semibold dark:text-dark-base-600 mb-2">Role</label>
                                    <select name="role" class="w-full rounded-lg border p-3 outline-none dark:border-dark-stroke-contrast-400 dark:bg-dark-fill-base-400 dark:text-dark-base-600 dark:focus:border-brand-blue-600" required>
                                        <option value="">Select Role</option>
                                        <option value="admin">Admin</option>
                                        <option value="manager">Manager</option>
                                        <option value="user">User</option>
                                    </select>
                                </div>
                                
                                <button type="submit" class="w-full py-3 px-6 rounded-lg dark:bg-brand-blue-600 dark:text-utility-white hover:dark:bg-brand-blue-500 text-body-s-semibold">
                                    Add User
                                </button>
                            </form>
                        </div>
                        
                        <!-- Existing Users List -->
                        <div class="p-6 rounded-lg dark:bg-dark-fill-base-300 dark:border dark:border-dark-stroke-contrast-400">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-heading-6 dark:text-dark-base-600">Existing Users</h3>
                                <button onclick="loadCredentials()" class="px-3 py-2 rounded-lg dark:bg-dark-stroke-base-400 dark:text-dark-base-600 hover:dark:bg-dark-stroke-base-600 text-body-s-semibold">
                                    Refresh
                                </button>
                            </div>
                            <div id="credentialsList" class="space-y-3 max-h-96 overflow-y-auto">
                                <!-- Credentials will be populated here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Floating Add Button -->
    <div id="floatingAddButton" class="fixed bottom-6 right-6 z-40 hidden">
        <button onclick="showAddOptions()" class="floating-add-btn flex items-center justify-center w-14 h-14 rounded-full dark:bg-brand-blue-600 dark:text-utility-white shadow-lg hover:dark:bg-brand-blue-500 transition-all transform hover:scale-110">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 5v14"/>
                <path d="M5 12h14"/>
            </svg>
        </button>
        
        <!-- Add Options Menu -->
        <div id="addOptionsMenu" class="hidden absolute bottom-16 right-0 w-48 dark:bg-dark-fill-base-300 dark:border dark:border-dark-stroke-contrast-400 rounded-lg shadow-lg">
            <div class="p-2">
                <button onclick="showAddLeadForm()" class="w-full text-left p-3 rounded-lg hover:dark:bg-dark-fill-base-600 dark:text-dark-base-600 transition-colors">
                    <div class="flex items-center gap-3">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                            <circle cx="9" cy="7" r="4"/>
                            <path d="m22 21-3-3m0 0a2 2 0 0 0 0-4 2 2 0 0 0 0 4"/>
                        </svg>
                        <span>Add New Lead</span>
                    </div>
                </button>
                <button onclick="showAddCustomerForm()" class="w-full text-left p-3 rounded-lg hover:dark:bg-dark-fill-base-600 dark:text-dark-base-600 transition-colors">
                    <div class="flex items-center gap-3">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                            <circle cx="9" cy="7" r="4"/>
                            <path d="m22 21-3-3m0 0a2 2 0 0 0 0-4 2 2 0 0 0 0 4"/>
                        </svg>
                        <span>Add New Customer</span>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Add Lead Form Modal -->
    <div id="addLeadModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <div class="dark:bg-dark-fill-base-300 rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-heading-6 dark:text-dark-base-600">Add New Lead</h2>
                <button onclick="closeAddLeadForm()" class="p-2 rounded-lg hover:dark:bg-dark-fill-base-600">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="dark:text-dark-base-600">
                        <path d="m18 6-12 12"/>
                        <path d="m6 6 12 12"/>
                    </svg>
                </button>
            </div>
            
            <form id="addLeadForm" onsubmit="handleAddLead(event)" class="space-y-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-body-m-semibold dark:text-dark-base-600 mb-2">Lead Type</label>
                        <select name="type" required class="w-full px-4 py-3 rounded-lg dark:bg-dark-stroke-base-400 dark:border dark:border-dark-stroke-contrast-400 dark:text-dark-base-600">
                            <option value="">Select Type</option>
                            <option value="Inbound">Inbound</option>
                            <option value="Outbound">Outbound</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-body-m-semibold dark:text-dark-base-600 mb-2">Customer Name</label>
                        <input type="text" name="customerName" required class="w-full px-4 py-3 rounded-lg dark:bg-dark-stroke-base-400 dark:border dark:border-dark-stroke-contrast-400 dark:text-dark-base-600">
                    </div>
                    
                    <div>
                        <label class="block text-body-m-semibold dark:text-dark-base-600 mb-2">Contact</label>
                        <input type="text" name="contact" required class="w-full px-4 py-3 rounded-lg dark:bg-dark-stroke-base-400 dark:border dark:border-dark-stroke-contrast-400 dark:text-dark-base-600">
                    </div>
                    
                    <div>
                        <label class="block text-body-m-semibold dark:text-dark-base-600 mb-2">Fleet Size</label>
                        <input type="number" name="fleetSize" required min="1" class="w-full px-4 py-3 rounded-lg dark:bg-dark-stroke-base-400 dark:border dark:border-dark-stroke-contrast-400 dark:text-dark-base-600">
                    </div>
                    
                    <div class="md:col-span-2">
                        <label class="block text-body-m-semibold dark:text-dark-base-600 mb-2">Status</label>
                        <select name="status" required class="w-full px-4 py-3 rounded-lg dark:bg-dark-stroke-base-400 dark:border dark:border-dark-stroke-contrast-400 dark:text-dark-base-600">
                            <option value="">Select Status</option>
                            <option value="New">New</option>
                            <option value="In Progress">In Progress</option>
                            <option value="Qualified">Qualified</option>
                            <option value="Not Qualified">Not Qualified</option>
                            <option value="Converted">Converted</option>
                        </select>
                    </div>
                </div>
                
                <div class="flex gap-4 pt-4">
                    <button type="submit" class="flex-1 py-3 px-6 rounded-lg dark:bg-brand-blue-600 dark:text-utility-white hover:dark:bg-brand-blue-500 text-body-s-semibold">
                        Save Lead
                    </button>
                    <button type="button" onclick="closeAddLeadForm()" class="flex-1 py-3 px-6 rounded-lg dark:bg-dark-stroke-base-400 dark:text-dark-base-600 hover:dark:bg-dark-stroke-base-600 text-body-s-semibold">
                        Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Customer Multi-Step Form Modal -->
    <div id="addCustomerModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <div class="dark:bg-dark-fill-base-300 rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-heading-6 dark:text-dark-base-600">Add New Customer</h2>
                <button onclick="closeAddCustomerForm()" class="p-2 rounded-lg hover:dark:bg-dark-fill-base-600">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="dark:text-dark-base-600">
                        <path d="m18 6-12 12"/>
                        <path d="m6 6 12 12"/>
                    </svg>
                </button>
            </div>
            
            <!-- Important Finance Notice -->
            <div class="mb-6 p-4 rounded-lg dark:bg-dark-warning-600/20 dark:border dark:border-dark-warning-600/30">
                <div class="flex items-center gap-3">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="dark:text-dark-warning-600">
                        <path d="M12 2v20m8-9a8 8 0 1 1-16 0 8 8 0 0 1 16 0Z"/>
                    </svg>
                    <div>
                        <h4 class="text-body-l-semibold dark:text-dark-warning-600">Finance Approval Required</h4>
                        <p class="text-body-m-regular dark:text-dark-base-500 mt-1">This customer will be sent to Finance for approval. Only approved customers appear in the main overview.</p>
                    </div>
                </div>
            </div>
            
            <!-- Step Indicator -->
            <div class="flex items-center justify-center mb-8">
                <div class="flex items-center">
                    <div id="step1Indicator" class="step-indicator active">
                        <span>1</span>
                    </div>
                    <div class="step-line"></div>
                    <div id="step2Indicator" class="step-indicator">
                        <span>2</span>
                    </div>
                </div>
            </div>
            
            <form id="addCustomerForm" onsubmit="handleAddCustomer(event)">
                <!-- Step 1: Basic Information -->
                <div id="step1Content">
                    <h3 class="text-heading-6 dark:text-dark-base-600 mb-6">Step 1: Basic Information</h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-body-m-semibold dark:text-dark-base-600 mb-2">Account Manager Name</label>
                            <input type="text" name="accountManagerName" required class="w-full px-4 py-3 rounded-lg dark:bg-dark-stroke-base-400 dark:border dark:border-dark-stroke-contrast-400 dark:text-dark-base-600">
                        </div>
                        
                        <div>
                            <label class="block text-body-m-semibold dark:text-dark-base-600 mb-2">Account Manager ID</label>
                            <input type="text" name="accountManagerId" required class="w-full px-4 py-3 rounded-lg dark:bg-dark-stroke-base-400 dark:border dark:border-dark-stroke-contrast-400 dark:text-dark-base-600">
                        </div>
                        
                        <div>
                            <label class="block text-body-m-semibold dark:text-dark-base-600 mb-2">Customer Name</label>
                            <input type="text" name="customerName" required class="w-full px-4 py-3 rounded-lg dark:bg-dark-stroke-base-400 dark:border dark:border-dark-stroke-contrast-400 dark:text-dark-base-600">
                        </div>
                        
                        <div>
                            <label class="block text-body-m-semibold dark:text-dark-base-600 mb-2">Customer Mobile</label>
                            <input type="tel" name="customerMobile" required class="w-full px-4 py-3 rounded-lg dark:bg-dark-stroke-base-400 dark:border dark:border-dark-stroke-contrast-400 dark:text-dark-base-600">
                        </div>
                        
                        <div class="md:col-span-2">
                            <label class="block text-body-m-semibold dark:text-dark-base-600 mb-2">Customer Email</label>
                            <input type="email" name="customerEmail" required class="w-full px-4 py-3 rounded-lg dark:bg-dark-stroke-base-400 dark:border dark:border-dark-stroke-contrast-400 dark:text-dark-base-600">
                        </div>
                    </div>
                    
                    <div class="flex justify-end mt-6">
                        <button type="button" onclick="goToStep2()" class="py-3 px-6 rounded-lg dark:bg-brand-blue-600 dark:text-utility-white hover:dark:bg-brand-blue-500 text-body-s-semibold">
                            Next Step
                        </button>
                    </div>
                </div>

                <!-- Step 2: Requirements & POC Details -->
                <div id="step2Content" class="hidden">
                    <h3 class="text-heading-6 dark:text-dark-base-600 mb-6">Step 2: Requirements & POC Details</h3>
                    
                    <div class="space-y-6">
                        <!-- Lead Sources -->
                        <div>
                            <label class="block text-body-m-semibold dark:text-dark-base-600 mb-3">Lead Sources (Select all that apply)</label>
                            <div class="grid grid-cols-2 md:grid-cols-3 gap-3">
                                <label class="flex items-center space-x-3 cursor-pointer p-3 rounded-lg dark:bg-dark-stroke-base-400 hover:dark:bg-dark-stroke-base-600">
                                    <input type="checkbox" name="leadSource" value="Website" class="form-checkbox">
                                    <span class="text-body-m-regular dark:text-dark-base-600">Website</span>
                                </label>
                                <label class="flex items-center space-x-3 cursor-pointer p-3 rounded-lg dark:bg-dark-stroke-base-400 hover:dark:bg-dark-stroke-base-600">
                                    <input type="checkbox" name="leadSource" value="Referral" class="form-checkbox">
                                    <span class="text-body-m-regular dark:text-dark-base-600">Referral</span>
                                </label>
                                <label class="flex items-center space-x-3 cursor-pointer p-3 rounded-lg dark:bg-dark-stroke-base-400 hover:dark:bg-dark-stroke-base-600">
                                    <input type="checkbox" name="leadSource" value="Cold Call" class="form-checkbox">
                                    <span class="text-body-m-regular dark:text-dark-base-600">Cold Call</span>
                                </label>
                                <label class="flex items-center space-x-3 cursor-pointer p-3 rounded-lg dark:bg-dark-stroke-base-400 hover:dark:bg-dark-stroke-base-600">
                                    <input type="checkbox" name="leadSource" value="Social Media" class="form-checkbox">
                                    <span class="text-body-m-regular dark:text-dark-base-600">Social Media</span>
                                </label>
                                <label class="flex items-center space-x-3 cursor-pointer p-3 rounded-lg dark:bg-dark-stroke-base-400 hover:dark:bg-dark-stroke-base-600">
                                    <input type="checkbox" name="leadSource" value="Trade Show" class="form-checkbox">
                                    <span class="text-body-m-regular dark:text-dark-base-600">Trade Show</span>
                                </label>
                                <label class="flex items-center space-x-3 cursor-pointer p-3 rounded-lg dark:bg-dark-stroke-base-400 hover:dark:bg-dark-stroke-base-600">
                                    <input type="checkbox" name="leadSource" value="Other" class="form-checkbox">
                                    <span class="text-body-m-regular dark:text-dark-base-600">Other</span>
                                </label>
                            </div>
                        </div>

                        <!-- Requirements -->
                        <div>
                            <label class="block text-body-m-semibold dark:text-dark-base-600 mb-3">Requirements (Select all that apply)</label>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                <label class="flex items-center space-x-3 cursor-pointer p-3 rounded-lg dark:bg-dark-stroke-base-400 hover:dark:bg-dark-stroke-base-600">
                                    <input type="checkbox" name="requirements" value="Real-time Tracking" class="form-checkbox">
                                    <span class="text-body-m-regular dark:text-dark-base-600">Real-time Tracking</span>
                                </label>
                                <label class="flex items-center space-x-3 cursor-pointer p-3 rounded-lg dark:bg-dark-stroke-base-400 hover:dark:bg-dark-stroke-base-600">
                                    <input type="checkbox" name="requirements" value="Fleet Management" class="form-checkbox">
                                    <span class="text-body-m-regular dark:text-dark-base-600">Fleet Management</span>
                                </label>
                                <label class="flex items-center space-x-3 cursor-pointer p-3 rounded-lg dark:bg-dark-stroke-base-400 hover:dark:bg-dark-stroke-base-600">
                                    <input type="checkbox" name="requirements" value="Route Optimization" class="form-checkbox">
                                    <span class="text-body-m-regular dark:text-dark-base-600">Route Optimization</span>
                                </label>
                                <label class="flex items-center space-x-3 cursor-pointer p-3 rounded-lg dark:bg-dark-stroke-base-400 hover:dark:bg-dark-stroke-base-600">
                                    <input type="checkbox" name="requirements" value="Driver Monitoring" class="form-checkbox">
                                    <span class="text-body-m-regular dark:text-dark-base-600">Driver Monitoring</span>
                                </label>
                                <label class="flex items-center space-x-3 cursor-pointer p-3 rounded-lg dark:bg-dark-stroke-base-400 hover:dark:bg-dark-stroke-base-600">
                                    <input type="checkbox" name="requirements" value="Fuel Monitoring" class="form-checkbox">
                                    <span class="text-body-m-regular dark:text-dark-base-600">Fuel Monitoring</span>
                                </label>
                                <label class="flex items-center space-x-3 cursor-pointer p-3 rounded-lg dark:bg-dark-stroke-base-400 hover:dark:bg-dark-stroke-base-600">
                                    <input type="checkbox" name="requirements" value="Maintenance Alerts" class="form-checkbox">
                                    <span class="text-body-m-regular dark:text-dark-base-600">Maintenance Alerts</span>
                                </label>
                            </div>
                        </div>

                        <!-- POC Type -->
                        <div>
                            <label class="block text-body-m-semibold dark:text-dark-base-600 mb-3">POC Type</label>
                            <div class="space-y-3">
                                <label class="flex items-center space-x-3 cursor-pointer p-4 rounded-lg dark:bg-dark-stroke-base-400 hover:dark:bg-dark-stroke-base-600">
                                    <input type="radio" name="pocType" value="poc" required class="form-radio">
                                    <div>
                                        <span class="text-body-m-semibold dark:text-dark-base-600">Proof of Concept (POC)</span>
                                        <p class="text-body-s-regular dark:text-dark-base-500">Customer will undergo a trial period</p>
                                    </div>
                                </label>
                                <label class="flex items-center space-x-3 cursor-pointer p-4 rounded-lg dark:bg-dark-stroke-base-400 hover:dark:bg-dark-stroke-base-600">
                                    <input type="radio" name="pocType" value="direct_onboarding" required class="form-radio">
                                    <div>
                                        <span class="text-body-m-semibold dark:text-dark-base-600">Direct Onboarding</span>
                                        <p class="text-body-s-regular dark:text-dark-base-500">Customer will be directly onboarded without POC</p>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <!-- POC Duration (shown only for POC type) -->
                        <div id="pocDurationSection">
                            <label class="block text-body-m-semibold dark:text-dark-base-600 mb-3">POC Duration</label>
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mb-4">
                                <label class="flex items-center justify-center p-3 rounded-lg cursor-pointer dark:bg-dark-stroke-base-400 hover:dark:bg-dark-stroke-base-600">
                                    <input type="radio" name="pocDuration" value="30" class="sr-only" onchange="hideCustomDuration()">
                                    <span class="text-body-m-regular dark:text-dark-base-600">30 Days</span>
                                </label>
                                <label class="flex items-center justify-center p-3 rounded-lg cursor-pointer dark:bg-dark-stroke-base-400 hover:dark:bg-dark-stroke-base-600">
                                    <input type="radio" name="pocDuration" value="60" class="sr-only" onchange="hideCustomDuration()">
                                    <span class="text-body-m-regular dark:text-dark-base-600">60 Days</span>
                                </label>
                                <label class="flex items-center justify-center p-3 rounded-lg cursor-pointer dark:bg-dark-stroke-base-400 hover:dark:bg-dark-stroke-base-600">
                                    <input type="radio" name="pocDuration" value="90" class="sr-only" onchange="hideCustomDuration()">
                                    <span class="text-body-m-regular dark:text-dark-base-600">90 Days</span>
                                </label>
                                <label class="flex items-center justify-center p-3 rounded-lg cursor-pointer dark:bg-dark-stroke-base-400 hover:dark:bg-dark-stroke-base-600">
                                    <input type="radio" name="pocDuration" value="custom" class="sr-only" onchange="showCustomDuration()">
                                    <span class="text-body-m-regular dark:text-dark-base-600">Custom</span>
                                </label>
                            </div>
                            
                            <div id="customDurationDiv" class="hidden">
                                <label class="block text-body-m-semibold dark:text-dark-base-600 mb-2">Custom Duration (Days)</label>
                                <input type="number" name="customDuration" min="1" max="365" class="w-full px-4 py-3 rounded-lg dark:bg-dark-stroke-base-400 dark:border dark:border-dark-stroke-contrast-400 dark:text-dark-base-600">
                            </div>
                        </div>

                        <!-- POC Start Date (shown only for POC type) -->
                        <div id="pocStartDateSection">
                            <label class="block text-body-m-semibold dark:text-dark-base-600 mb-2">POC Start Date (Optional)</label>
                            <input type="date" name="pocStartDate" class="w-full px-4 py-3 rounded-lg dark:bg-dark-stroke-base-400 dark:border dark:border-dark-stroke-contrast-400 dark:text-dark-base-600">
                            <p class="text-body-s-regular dark:text-dark-base-500 mt-1">Leave empty to set start date after finance approval</p>
                        </div>
                    </div>
                    
                    <div class="flex gap-4 pt-6">
                        <button type="button" onclick="goToStep1()" class="py-3 px-6 rounded-lg dark:bg-dark-stroke-base-400 dark:text-dark-base-600 hover:dark:bg-dark-stroke-base-600 text-body-s-semibold">
                            Previous
                        </button>
                        <button type="submit" class="flex-1 py-3 px-6 rounded-lg dark:bg-brand-blue-600 dark:text-utility-white hover:dark:bg-brand-blue-500 text-body-s-semibold">
                            Submit for Finance Approval
                        </button>
                        <button type="button" onclick="closeAddCustomerForm()" class="py-3 px-6 rounded-lg dark:bg-dark-stroke-base-400 dark:text-dark-base-600 hover:dark:bg-dark-stroke-base-600 text-body-s-semibold">
                            Cancel
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- POC Action Modal -->
    <div id="pocActionModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <div class="dark:bg-dark-fill-base-300 rounded-lg p-6 w-full max-w-md">
            <div class="text-center mb-6">
                <h3 class="text-heading-6 dark:text-dark-base-600 mb-2">POC Actions</h3>
                <p class="text-body-m-regular dark:text-dark-base-500">Choose an action for <span id="pocCustomerName" class="font-semibold"></span></p>
            </div>
            
            <div class="space-y-3 mb-6">
                <button onclick="confirmOnboard()" class="w-full py-3 px-4 rounded-lg dark:bg-green-600 dark:text-utility-white hover:dark:bg-green-500 text-body-m-semibold">
                    Onboard Customer
                </button>
                <button onclick="showExtendPOCForm()" class="w-full py-3 px-4 rounded-lg dark:bg-brand-blue-600 dark:text-utility-white hover:dark:bg-brand-blue-500 text-body-m-semibold">
                    Extend POC
                </button>
                <button onclick="confirmClose()" class="w-full py-3 px-4 rounded-lg dark:bg-red-600 dark:text-utility-white hover:dark:bg-red-500 text-body-m-semibold">
                    Close POC
                </button>
            </div>
            
            <!-- Extend POC Form -->
            <div id="extendPOCForm" class="hidden">
                <div class="border-t dark:border-dark-stroke-contrast-400 pt-4">
                    <label class="block text-body-m-semibold dark:text-dark-base-600 mb-2">Extend by how many days?</label>
                    <input type="number" id="extendDaysInput" value="10" min="1" max="90" class="w-full px-4 py-3 rounded-lg dark:bg-dark-stroke-base-400 dark:border dark:border-dark-stroke-contrast-400 dark:text-dark-base-600 mb-4">
                    
                    <div class="flex gap-3">
                        <button onclick="confirmExtendPOC()" class="flex-1 py-2 px-4 rounded-lg dark:bg-brand-blue-600 dark:text-utility-white hover:dark:bg-brand-blue-500 text-body-s-semibold">
                            Confirm Extend
                        </button>
                        <button onclick="hideExtendPOCForm()" class="flex-1 py-2 px-4 rounded-lg dark:bg-dark-stroke-base-400 dark:text-dark-base-600 hover:dark:bg-dark-stroke-base-600 text-body-s-semibold">
                            Cancel
                        </button>
                    </div>
                </div>
            </div>
            
            <button onclick="closePOCActionModal()" class="w-full py-2 px-4 rounded-lg dark:bg-dark-stroke-base-400 dark:text-dark-base-600 hover:dark:bg-dark-stroke-base-600 text-body-s-semibold">
                Cancel
            </button>
        </div>
    </div>

    <!-- Finance Approval Modal -->
    <div id="financeApprovalModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <div class="dark:bg-dark-fill-base-300 rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-heading-6 dark:text-dark-base-600">Customer Approval</h2>
                <button onclick="closeFinanceApprovalModal()" class="p-2 rounded-lg hover:dark:bg-dark-fill-base-600">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="dark:text-dark-base-600">
                        <path d="m18 6-12 12"/>
                        <path d="m6 6 12 12"/>
                    </svg>
                </button>
            </div>
            
            <div id="financeApprovalContent">
                <!-- Content will be loaded dynamically -->
            </div>
        </div>
    </div>

    <!-- Customer Details Modal -->
    <div id="customerDetailsModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <div class="dark:bg-dark-fill-base-300 rounded-lg p-6 w-full max-w-3xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-heading-6 dark:text-dark-base-600">Customer Details</h2>
                <button onclick="closeCustomerDetailsModal()" class="p-2 rounded-lg hover:dark:bg-dark-fill-base-600">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="dark:text-dark-base-600">
                        <path d="m18 6-12 12"/>
                        <path d="m6 6 12 12"/>
                    </svg>
                </button>
            </div>
            
            <div id="customerDetailsContent">
                <!-- Content will be loaded dynamically -->
            </div>
        </div>
    </div>

    <!-- Success/Error Toast -->
    <div id="emailToast" class="fixed top-4 right-4 z-50 hidden">
        <div class="px-6 py-4 rounded-lg shadow-lg dark:bg-dark-fill-base-300 dark:border dark:border-dark-stroke-contrast-400">
            <div class="flex items-center gap-3">
                <div id="toastIcon" class="flex-shrink-0">
                    <!-- Icon will be added dynamically -->
                </div>
                <div>
                    <div id="toastMessage" class="text-body-m-semibold dark:text-dark-base-600"></div>
                </div>
                <button onclick="hideEmailToast()" class="ml-4 p-1 rounded hover:dark:bg-dark-fill-base-600">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="dark:text-dark-base-500">
                        <path d="m18 6-12 12"/>
                        <path d="m6 6 12 12"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
